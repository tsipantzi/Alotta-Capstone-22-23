plugins {
	id 'org.springframework.boot' version '2.7.4' apply(false)
	id 'io.spring.dependency-management' version '1.0.14.RELEASE'
	id 'java'
	id "ru.vyarus.quality" version "4.8.0"
}

group = 'liberty.capstone'
version = '0.0.1-SNAPSHOT'
sourceCompatibility = '17'

configure(subprojects.findAll{!it.name.endsWith("_client")}) {
	project.version = project.rootProject.version
	project.group = project.rootProject.group

	repositories {
		mavenCentral()
	}

	apply plugin: 'java'
	apply plugin: 'ru.vyarus.quality'
	apply plugin: 'org.springframework.boot'
	apply plugin: 'io.spring.dependency-management'
	bootJar.enabled = false

	configurations {
		compileOnly {
			extendsFrom annotationProcessor
		}
	}

	jar {
		enabled = true
		manifest {
			attributes(
					'Main-Class': 'liberty.capstone.ProcessApplication'
			)
		}
	}

	bootRun {
		enabled = false
	}

	bootBuildImage {
		enabled = false
	}

	apply from: "../gradle/plugins/quality-check.gradle"
	apply from: "../gradle/plugins/junit-test-config.gradle"

	dependencies {
		implementation 'org.springframework.boot:spring-boot-starter-web'
		testImplementation 'org.springframework.boot:spring-boot-starter-test'
		developmentOnly 'org.springframework.boot:spring-boot-devtools'
		implementation 'org.springframework.boot:spring-boot-starter-webflux'

		compileOnly 'org.projectlombok:lombok'
		annotationProcessor 'org.projectlombok:lombok'
		annotationProcessor 'org.springframework.boot:spring-boot-configuration-processor'
		testCompileOnly 'org.projectlombok:lombok'
		testAnnotationProcessor 'org.projectlombok:lombok'
		compileOnly 'com.google.code.findbugs:annotations:3.0.1'
		compileOnly 'com.google.code.findbugs:jsr305:3.0.1'
	}

}

dependencies {
	implementation project(":alotta-database")
	implementation project(":alotta-process")
}
